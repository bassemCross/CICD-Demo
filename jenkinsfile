pipeline { 
    agent any  
    stages { 
        stage('Build') { 
            steps { 
                script {
                    echo 'Build.'
                    if (isUnix()) {
                        sh 'mvn -B -DskipTests clean package'
                    }else{
                        bat 'mvn -B -DskipTests clean package'
                    }
                }
            }
        }
        stage('Image') { 
            steps { 
               echo 'Image.'
                script {
                    echo 'Build.'
                    if (isUnix()) {
                        sh 'docker build -t sonic .'
                    }else{
                        bat 'docker build -t sonic .'
                    }
                }
            }
        }
    }
}